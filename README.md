# Структура
* common: 
  * api: вспомогательные проверочные функции/методы
  * helpers: logger, Schema
* test_data: различные тестовые данные, данные для сравнения и т.п.
* tests: тесты
* tests:
  * conftest.py: фикстуры

# Настройка для локального запуска
Для локальной работы необходимо добавить .env файл (по примеру .env.example) или прописывать все данные вручную в config

# Локальный запуск для Ubuntu

Необходимы следующие компоненты: 
1. Python 3.10.6
2. ...

Если установлено несколько версий питона на компьютере, то ставим 3.10 по умолчанию:
```
alias python=python3.10
```

Проверяем, что версия питона изменилась:
```
python3 -V

Результат: Python 3.10.6
```

## Создаём виртуальное окружение
```
python3 -m venv my-project-env
```

Если ловим ошибку:
```
Error: Command '['/home/your_name/project/repository/your_project/your_project-venv/bin/python3.10', '-Im', 'ensurepip', '--upgrade', '--default-pip']' returned non-zero exit status 1.
```

То необходимо установить:
```
sudo apt-get install python3.10-dev python3.10-venv
```

*Не забываем добавить в локальный гит игнор свой venv!!!* 

**Активируем**:
```
source your_venv_name/bin/activate

Результат:

(your_venv_name) your_user:path/to/project/project$
```

**Устанавливаем зависимости**
```
pip install -r requirements.txt
```
Далее в пайчарме идём в 

*File* -> *Settings* -> *Project: Your_project* ->
*Python interpreter* -> *Show All* -> Нажимаем на "+" -> Слева Virtual Environment 
Справа Existing Environment - тут должен быть указан тот venv, который создавали
руками ранее, его и выбираем, кликаем Apply, ждём пока проиндексируется и ОК

Для запуска из консоли не забываем прописать:
```
export PYTHONPATH="${PYTHONPATH}:/path/to/your/project/"
```

## Запуск

В корневой директории проекта запускаем:
```
pytest                                                                                                                                                                                                            

```


# Git (Github)

Основная ветка - main. Процесс работы:

* Бранчуемся от main.
* Делаем тесты
* Если есть изменения в main - не забываем подтягивать их к себе и ребейзиться
* Сделали тесты, проверили работоспосбность, пушим в свою ветку и создаём merge request
* Получаем апрув и мёржим
  * Если есть замечания и нужны правки, то либо делаем в своей ветке через 
  ```
  git commit --amend --no-edit && git push origin your_branch --force
  ```
  либо через fixup:
  ```
  git commit --fixup=commit_to_fix
  ```
  Если делаем через fixup, то не забываем в конце их "схлопывать"
* При мерже схлопываем коммиты в любом случае, стараемся, чтоб в одном мре было максимум 3 коммита, но лучше 1
* Profit?

# Работа с кодом

* Прежде, чем писать assert или любой другой метод - посмотреть существующие api & helpers, возможно там есть уже что-то
* Нэйминг методов/переменных и т.д.: в обязательном порядке должен быть говорящий нэйминг всего, что пишем. Даже если аллюр декораторы дают нам более чем подробную информацию о тесте, функции и т.д. - даём соответствующие имена сущностям, 
  без впадания в крайности, кратко, но содержательно
* Аналогично предыдущему пункту: коммиты делаем содержательными и информативными, но без переусердствований
  
  
# Backlog | To do list | Reminder
